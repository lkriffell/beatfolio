<% if @user %>
<div class="profile">
  <%= image_tag @user.image %><br>
  <ul>
    <h2><%= @user.username %></h2>
    <% if @own_page %>
      <li>Followers: <%= @follower_count %></li>
      <li>Following: <%= @following_count %></li>
    <% elsif @following %>
      <li>Followers: <%= @follower_count %> <%= button_to "Unfollow", "/users/#{@user.id}/unfollow" %></li>
      <li>Following: <%= @following_count %></li>
    <% else %>
      <li>Followers: <%= @follower_count %> <%= button_to "Follow", "/users/#{@user.id}/follow" %></li>
      <li>Following: <%= @following_count %></li>
    <% end %>
    <li>Joined: <%= @user.created_at.strftime("%B %d %Y") %></li>
  </ul>
</div>

  <% if @user.beats %>
    <div class='user-tracks'>
      <h3><%= @user.username %>'s Tracks </h3><br>
      <div class='tracks'>
        <% @user.beats.each do |beat| %>
          <div class='track'>
            <div class="row" data-masonry="{&quot;percentPosition&quot;: true }" style="position: relative; height: 1879px;">
              <div class="col-sm-6 col-lg-4 mb-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title"><%= beat.name %></h5>
                    <audio class='audio' controls>
                      <source src=<%=beat.audio.url%>/>
                    </audio>
                    <ul>
                      <li class="card-text"><%= beat.description %></li>
                      <li class="card-text">Producer: <%= @user.username %></li>
                    </ul>
                    <% if beat.beat_tags.size > 0 %>
                        <div class='dropdown'>
                          <button class="dropbtn drop" style="width:100%">Tags</button>
                            <div class="dropdown-content">
                              <ul>
                                <% beat.beat_tags.each do |tag| %>
                                  <li href="#"><%= link_to tag.tag, "/search?#{tag.tag}" %></li>
                                <% end %>
                              </ul>
                            </div>
                        </div>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>
